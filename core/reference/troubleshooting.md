# ðŸ›¡ï¸ QA & Deployment Standards

Ð­Ñ‚Ð¾Ñ‚ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ Ð¾Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÑ‚ ÑƒÑ€Ð¾ÐºÐ¸, Ð¸Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð½Ñ‹Ðµ Ð¸Ð· Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐ½-Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ, Ð¸ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ ÐžÐ‘Ð¯Ð—ÐÐ¢Ð•Ð›Ð¬ÐÐž Ð½ÑƒÐ¶Ð½Ð¾ ÑÐ¾Ð±Ð»ÑŽÐ´Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¸Ð·Ð±ÐµÐ¶Ð°Ñ‚ÑŒ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€ÐµÐ½Ð¸Ñ Ð¾ÑˆÐ¸Ð±Ð¾Ðº.

## ðŸ›‘ Critical Rules (LLM Self-Correction)

ÐŸÐµÑ€ÐµÐ´ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸ÐµÐ¼ Ð·Ð°Ð´Ð°Ñ‡Ð¸ Ð°Ð³ÐµÐ½Ñ‚ **ÐžÐ‘Ð¯Ð—ÐÐ**:
1.  **ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð¾Ð²:** ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ `nuxt.config.ts`.
    *   âŒ ÐÐ• Ð”Ð£Ð‘Ð›Ð˜Ð ÐžÐ’ÐÐ¢Ð¬ ÐºÐ»ÑŽÑ‡Ð¸ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, `typescript: {}` Ð²Ð½ÑƒÑ‚Ñ€Ð¸ `typescript: {}`).
    *   âŒ ÐÐ• ÐžÐ¡Ð¢ÐÐ’Ð›Ð¯Ð¢Ð¬ Ð½ÐµÐ·Ð°ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ ÑÐºÐ¾Ð±ÐºÐ¸.
2.  **ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ñ‹:**
    *   âš ï¸ Ð’ Ñ„Ð°Ð¹Ð»Ð°Ñ… `.ts` (composables) Ð°Ð²Ñ‚Ð¾-Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ñ‹ Nuxt Ð¼Ð¾Ð³ÑƒÑ‚ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð´Ð»Ñ top-level Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ….
    *   âœ… Ð’Ð¡Ð•Ð“Ð”Ð ÑÐ²Ð½Ð¾ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ `ref`, `computed`, `onMounted` Ð¸Ð· 'vue' Ð² Ð½Ð°Ñ‡Ð°Ð»Ðµ `useSomething.ts`.
3.  **Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð›Ð¸Ð½Ñ‚ÐµÑ€:**
    *   âœ… Ð’Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ `npm run lint` Ð¿ÐµÑ€ÐµÐ´ Ñ‚ÐµÐ¼, ÐºÐ°Ðº Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ ÑŽÐ·ÐµÑ€Ð° ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ push.

## ðŸš€ Deployment & Docker

### 1. Nuxt Configuration for Docker
ÐŸÑ€Ð¸ ÑÐ±Ð¾Ñ€ÐºÐµ Ð² Docker (Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ Alpine) Ð²Ð¾Ð·Ð½Ð¸ÐºÐ°ÑŽÑ‚ ÑÐ¿ÐµÑ†Ð¸Ñ„Ð¸Ñ‡Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹.

*   **TypeCheck:** Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ **Ð’Ð«ÐšÐ›Ð®Ð§Ð•Ð** Ð² `nuxt.config.ts`.
    ```typescript
    typescript: {
      typeCheck: false // âœ… Docker fail fix: auto-imports are not ready at build time
    }
    ```
    *ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ:* `vue-tsc` Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ Ð´Ð¾ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ `.nuxt`, Ð¸ Ð¿Ð°Ð´Ð°ÐµÑ‚ Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ¾Ð¹ `Cannot find name 'use...'`. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÑƒ Ñ‚Ð¸Ð¿Ð¾Ð² Ð´ÐµÐ»Ð°ÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð² CI (`npm run typecheck`).

*   **Nitro Preset:** Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ ÑÐ²Ð½Ð¾ ÑƒÐºÐ°Ð·Ð°Ð½ ÐºÐ°Ðº `node-server`.
    ```typescript
    nitro: {
      preset: 'node-server' // âœ… Prevents "Exited (0)" immediate shutdown
    }
    ```
    *ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ:* Ð‘ÐµÐ· ÑÑ‚Ð¾Ð³Ð¾ Nuxt Ð¼Ð¾Ð¶ÐµÑ‚ ÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ "ÑÐºÑ€Ð¸Ð¿Ñ‚" Ð²Ð¼ÐµÑÑ‚Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°, Ð¸ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ Ð²Ñ‹ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑÑ ÑÑ€Ð°Ð·Ñƒ Ð¿Ð¾ÑÐ»Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°.

### 2. Debugging Production
Ð•ÑÐ»Ð¸ "Ð²ÑÐµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾, Ð½Ð¾ Ð½Ðµ Ð½Ð° Ð¿Ñ€Ð¾Ð´Ðµ":

1.  **Browser Cache:**
    *   Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼: Ð‘ÑÐºÐµÐ½Ð´ Ñ€ÑƒÐ³Ð°ÐµÑ‚ÑÑ Ð½Ð° Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ðµ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¾Ð², ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¼Ñ‹ Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð¸Ð»Ð¸.
    *   ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°: Ð‘Ñ€Ð°ÑƒÐ·ÐµÑ€/Telegram Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ ÑÑ‚Ð°Ñ€Ñ‹Ð¹ `.js` Ñ„Ð°Ð¹Ð».
    *   Ð ÐµÑˆÐµÐ½Ð¸Ðµ: Ð¡Ñ€Ð°Ð²Ð½Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸. Ð•ÑÐ»Ð¸ Ð½Ð¾Ð²Ñ‹Ñ… Ð»Ð¾Ð³Ð¾Ð² Ð½ÐµÑ‚ â€” ÐºÐ¾Ð´ ÑÑ‚Ð°Ñ€Ñ‹Ð¹.

2.  **Container Stale State:**
    *   Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼: GitHub Actions "Green", Ð½Ð¾ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ð½ÐµÑ‚.
    *   ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°: `docker ps` Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ. Ð•ÑÐ»Ð¸ `Up 2 weeks` â€” Ñ€ÐµÑÑ‚Ð°Ñ€Ñ‚Ð° Ð½Ðµ Ð±Ñ‹Ð»Ð¾.
    *   Ð ÐµÑˆÐµÐ½Ð¸Ðµ: `docker compose down && docker compose up -d --build`.

## ðŸ§© TypeScript & Composables
*   **Singleton Pattern:** Ð”Ð»Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ…, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð¶Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ð²Ñ€ÐµÐ¼Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ (User Session, InitData), Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¿Ð°Ñ‚Ñ‚ÐµÑ€Ð½ ÑÐ¸Ð½Ð³Ð»Ñ‚Ð¾Ð½Ð° (Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð²Ð½Ðµ `export const function`).
    *   âš ï¸ **Ð’ÐÐ–ÐÐž:** ÐÐµ Ð·Ð°Ð±Ñ‹Ð²Ð°Ð¹ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ `ref` Ð´Ð»Ñ ÑÑ‚Ð¸Ñ… Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ…!

```typescript
import { ref } from 'vue'; // âœ… REQUIRED

const user = ref(null); // Singleton

export const useUser = () => { ... }
```
