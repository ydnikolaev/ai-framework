# üåç –û–∫—Ä—É–∂–µ–Ω–∏—è (Environments)

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç—Ä–æ–≥—É—é –∏–∑–æ–ª—è—Ü–∏—é –æ–∫—Ä—É–∂–µ–Ω–∏–π. –ö–æ–¥ –æ–¥–∏–Ω, –Ω–æ –∫–æ–Ω—Ñ–∏–≥–∏ –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ä–∞–∑–Ω—ã–µ.

## 1. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (Dev)

–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–≤–æ–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (Mac).

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|
| **–ë–î** | Postgres –≤ Docker (`localhost:5432`). –ë–∞–∑–∞: `project_dev`. |
| **Backend** | –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ `go run`. –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î. |
| **Frontend** | –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `npm run dev`. –î–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `localhost:3000`. |
| **–î–æ—Å—Ç—É–ø —Å–Ω–∞—Ä—É–∂–∏** | **Dev Tunnel** (SSH Reverse Proxy). –î–æ–º–µ–Ω: `dev.project.ru`. |
| **Telegram Bot** | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π –±–æ—Ç `@ProjectDevBot`. –¢–æ–∫–µ–Ω –≤ `.env`. |

### –°—Ö–µ–º–∞ Dev-—Ç—É–Ω–Ω–µ–ª—è
–ß—Ç–æ–±—ã Telegram (–≤–Ω–µ—à–Ω–∏–π –º–∏—Ä) –≤–∏–¥–µ–ª —Ç–≤–æ–π –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:
1.  –¢—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å —Ç—É–Ω–Ω–µ–ª—å: `make tunnel` (–∏–ª–∏ ssh –∫–æ–º–∞–Ω–¥–∞).
2.  –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ `dev.project.ru` —É–ª–µ—Ç–∞—é—Ç –Ω–∞ —Ç–≤–æ–π VPS.
3.  VPS –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –∏—Ö –Ω–∞ —Ç–≤–æ–π Mac (–ø–æ—Ä—Ç 3000).

## 2. –ü—Ä–æ–¥–∞–∫—à–Ω (Prod)

–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ VPS —Å–µ—Ä–≤–µ—Ä–µ.

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|
| **–ë–î** | Postgres –≤ Docker (–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–µ—Ç—å). –ë–∞–∑–∞: `project_prod`. |
| **Backend** | Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (`api`, `bot`). |
| **Frontend** | Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (Node.js/Nuxt). |
| **–î–æ—Å—Ç—É–ø —Å–Ω–∞—Ä—É–∂–∏** | –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Traefik (HTTPS). –î–æ–º–µ–Ω: `project.ru`. |
| **Telegram Bot** | –û—Å–Ω–æ–≤–Ω–æ–π –±–æ–µ–≤–æ–π –±–æ—Ç. |

---

## –í–∞–∂–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è

1.  **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
    -   Dev: –¢—ã –º–æ–∂–µ—à—å —Å–º–µ–ª–æ –¥–µ–ª–∞—Ç—å `make reset-db` –∏ —É–¥–∞–ª—è—Ç—å –≤—Å—ë.
    -   Prod: –î–∞–Ω–Ω—ã–µ —Å–≤—è—â–µ–Ω–Ω—ã. –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞–∫–∞—Ç—ã–≤–∞—é—Ç—Å—è –∞–∫–∫—É—Ä–∞—Ç–Ω–æ (`make migrate-prod`).
2.  **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`.env`):**
    -   `ÈÄöËøá APP_ENV=development` –∏–ª–∏ `production` –∫–æ–¥ –ø–æ–Ω–∏–º–∞–µ—Ç, –≥–¥–µ –æ–Ω.
    -   –í Prod –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –¥–∏—Å–∫—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, –ª–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ stdout.
3.  **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
    -   –í Prod API –∑–∞–∫—Ä—ã—Ç –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø–æ–¥–ø–∏—Å–∏ `initData` (Telegram).
    -   –í Dev –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Å–ª–∞–±–ª–µ–Ω–∞ (–∏–ª–∏ —Ç—ã –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—à—å –≤–∞–ª–∏–¥–Ω—ã–π —Ö–µ—à –¥–ª—è —Ç–µ—Å—Ç–æ–≤).
